{"version":3,"sources":["src/app.js","src/auth-config.js","src/environment.js","src/main.js","src/modules/home.js","src/modules/list.js","src/resources/index.js","src/resources/data/data-services.js","src/resources/data/pics.js","src/resources/data/users.js"],"names":["App","configureRouter","config","router","addPipelineStep","map","route","moduleId","name","auth","authConfig","baseUrl","loginUrl","tokenName","authHeader","authToken","logoutRedirect","debug","testing","configure","window","regeneratorRuntime","aurelia","use","standardConfiguration","plugin","baseConfig","feature","developmentLogging","start","then","setRoot","Home","users","loginError","message","showLogin","showOK","showError","login","email","password","sessionStorage","setItem","JSON","stringify","response","user","navigate","catch","console","log","error","showRegister","firstName","lastName","registerError","save","serverResponse","Wall","pics","parse","getItem","modalTitle","gallerySelected","selected","filesToUpload","selectGallery","pic","logout","removeItem","selectAction","id","event","index","indexOf","splice","push","$","target","hasClass","toggleClass","parent","createImages","picObj","modal","alert","deleteImages","i","l","length","reponse","_id","saveImages","uploadFile","location","reload","createPic","userID","editPic","deleteGallery","deletePic","changeFiles","Array","files","removeFile","savePic","close","picId","activate","getUserPics","DataServices","http","httpClient","BASE_URL","withBaseUrl","withDefaults","credentials","headers","withInterceptor","request","method","url","status","get","fetch","json","data","post","content","body","object","put","delete","uploadFiles","Pics","PIC_SERVICE","picsArray","updateArray","pop","userId","formData","FormData","forEach","item","append","images","Users","USER_SERVICE"],"mappings":"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","file":"app-bundle.js","sourcesContent":["import {AuthorizeStep} from 'aurelia-auth';\n\nexport class App {\n  configureRouter(config, router) {\n    this.router = router;\n    config.addPipelineStep('authorize', AuthorizeStep);\n    config.map([\n      { \n        route: ['', 'home'],\n        moduleId: './modules/home',\n        name: 'Home' \n      },\n      {\n        route: 'list',\n        moduleId: './modules/list',\n        name: 'List' ,\n        auth: true \n     }\n    ]);\n  }\n}\n","var authConfig = {\n   baseUrl: \"/\",\n   loginUrl: 'users/login',\n   tokenName: 'token',\n   authHeader: 'Authorization',\n   authToken: '',\n   logoutRedirect: '#/home'\n}\n \nexport default authConfig;","export default {\n  debug: true,\n  testing: true\n};\n","import environment from './environment';\nimport regeneratorRuntime from 'regenerator-runtime';\nimport config from './auth-config';\nwindow.regeneratorRuntime = regeneratorRuntime;\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .plugin('aurelia-auth', (baseConfig) => {\n      baseConfig.configure(config);\n    })\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","import {inject} from 'aurelia-framework';\nimport {Router} from 'aurelia-router';\nimport {Users} from '../resources/data/users';\nimport {AuthService} from 'aurelia-auth';\n\n@inject(Router, Users, AuthService)\nexport class Home {\n  constructor(router, users, auth) {\n    this.router = router;\n    this.auth = auth;\n    this.loginError = '';    \n    this.users = users;\n    this.message = 'Home';\n    this.showLogin = true;\n\t\tthis.showOK  = false;\n\t\tthis.showError  = false;\n  }\n\n\n\tlogin() {\n    \treturn this.auth.login(this.email, this.password)\n\t\t.then(response => {\n\t\t\t\tsessionStorage.setItem(\"user\", JSON.stringify(response.user));\n\t\t\t\tthis.loginError = \"\";\n\t\t\t\tthis.router.navigate('list');\n\t\t})\n\t\t.catch(error => {\n        \tconsole.log(error);\n\t\t\tthis.loginError = \"Username and or password is incorrect. Try again.\";\n\t\t});\n\t};\n\n\tshowRegister(){\n\t\tthis.user = {\n\t\t\tfirstName: \"\",\n\t\t\tlastName: \"\",\n\t\t\temail: \"\",\n\t\t\tpassword: \"\"\n\t\t}\n\t\tthis.registerError = \"\";\n\t\tthis.showLogin = false;\n\t}\n\n\tasync save(){\n\t\tlet serverResponse = await this.users.save(this.user);\n\t\tif (!serverResponse.error) {\n\t\t\tthis.showOK = true;\n\t\t\tthis.user = {\n\t\t\t\tfirstName: \"\",\n\t\t\t\tlastName: \"\",\n\t\t\t\temail: \"\",\n\t\t\t\tpassword: \"\"\n\t\t\t}\n\t\t} else {\n\t\t\tthis.showError = true;\n\t\t}\n\t}\n}\n","import {inject} from 'aurelia-framework';\nimport {Router} from 'aurelia-router';\nimport {Pics} from '../resources/data/pics';\nimport {AuthService} from 'aurelia-auth';\n\n@inject(Pics, AuthService, Router)\nexport class Wall {\n  constructor(pics, auth,router) {\n    this.pics = pics;\n  \tthis.router = router;\n    this.auth = auth;\n    this.user = JSON.parse(sessionStorage.getItem('user'));\n    this.message = this.user.firstName+\"'s Pics\";\n    this.modalTitle = '';\n    this.gallerySelected = false;\n    this.selected = [];\n    this.filesToUpload = [];\n  }\n\n  selectGallery(pic){\n    this.gallerySelected = pic;\n    this.selected = [];\n  }\n\n  logout(){\n    sessionStorage.removeItem('user');\n    this.auth.logout();\n  }\n\n  selectAction(id,event){\n    var index = this.selected.indexOf(id);\n    if (index >= 0) {\n      this.selected.splice(index,1);\n    } else {\n      this.selected.push(id);\n    }\n\n    if($(event.target).hasClass('pic-container')){\n      $(event.target).toggleClass('active');\n    } else {\n      $(event.target).parent().toggleClass('active');\n    }\n  }\n\n  createImages(){\n\n    if (this.gallerySelected) {\n      this.picObj = this.gallerySelected\n      this.modalTitle = 'Add Image';\n      $('#addPicture').modal();\n    } else{\n      alert('Select a gallery');\n    }\n  }\n\n  deleteImages(){\n    for(var i = 0, l = this.selected.length; i < l; i ++) {\n      var reponse = this.pics.deleteImages(this.selected,this.gallerySelected._id);\n    }\n\n    this.selected = [];\n  }\n\n  async saveImages(){\n    if(this.filesToUpload && this.filesToUpload.length){\n      this.gallerySelected = await this.pics.uploadFile(this.filesToUpload, this.user._id, this.gallerySelected._id);\n      this.filesToUpload = [];\n    }\n    $('#addPicture').modal('toggle');\n    window.location.reload()\n  }\n\n\n  createPic(){\t\n    this.picObj = {\n      name: \"\",\n      userID: this.user._id,\n    }\n    this.modalTitle = 'New Pic';\n    $('#mainModal').modal();\n  }\n\n\n  editPic(pic){  \n    this.picObj = pic;\n    this.modalTitle = 'Edit Pic';\n    $('#mainModal').modal();\n  }\n\n  deleteGallery(pic){\n    this.pics.deletePic(pic._id);\n    this.gallerySelected = false;\n  }\n\n  changeFiles(){\n    this.filesToUpload = new Array(); \n    this.filesToUpload.push(this.files[0]);\n  }\n   removeFile(index){\n    this.filesToUpload.splice(index,1);\n  }\n\n  async savePic(close){\n    if(this.picObj){   \n      let response = await this.pics.save(this.picObj);\n      if(response.error){\n        alert(\"There was an error creating the Pic\");\n      } else {\n        var picId = response._id;\n      }\n      if (close) {\n        $('#mainModal').modal('toggle');\n      }\n    }\n  }\n\n  async activate(){\n    await  this.pics.getUserPics(this.user._id);\n  }\n\n}","export function configure(config) {\n  //config.globalResources([]);\n}\n","import { inject } from 'aurelia-framework';\nimport {HttpClient, json} from 'aurelia-fetch-client';\n\n@inject(HttpClient)\nexport class DataServices {\n  constructor(http) {\n    this.httpClient = http;\n    this.BASE_URL = \"/api/\";\n\n    this.httpClient.configure(config => {\n      config\n      .withBaseUrl(this.BASE_URL)\n      .withDefaults({\n        credentials: 'same-origin',\n        headers: {\n          'Accept': 'application/json',\n          'X-Requested-With': 'Fetch'\n        }\n      })\n      .withInterceptor({\n      request(request) {\n        console.log(`Requesting ${request.method} ${request.url}`);\n        return request;\n      },\n      response(response) {\n        console.log(`Received ${response.status} ${response.url}`);\n        return response;\n      }\n      });\n    });\n  }\n\n  get(url) {\n    return this.httpClient.fetch(url)\n      .then(response => response.json())\n      .then(data => {\n        return data;\n      })\n      .catch(error => {\n        return error;\n      });\n  }\n\n  post(content, url) {\n    return this.httpClient\n      .fetch(url, {\n        method: 'post',\n        body: json(content)\n      })\n      .then(response => response.json())\n      .then(object => {\n        return object;\n      })\n      .catch(error => {\n        return error;\n      });\n  }\n\n  put(content, url) {\n    return this.httpClient\n      .fetch(url, {\n        method: 'put',\n        body: json(content)\n      })\n      .then(response => response.json())\n      .then(object => {\n        return object;\n      })\n      .catch(error => {\n        return error;\n      });\n  }\n\n  delete(url) {\n    return this.httpClient\n      .fetch(url, {\n        method: 'delete'\n      })\n      .then(response => response.json())\n      .then(object => {\n        return object;\n      })\n      .catch(error => {\n        return error ;\n      });\n  }\n\n  uploadFiles(files, url){\n  return this.httpClient\n    .fetch(url, {\n      method: 'post',\n      body: files\n    })\n    .then(response => response.json())\n    .then(object => {\n      return object;\n    })\n    .catch(error => {\n      return error;\n    });\n  }\n\n}\n\n\n","import {inject} from 'aurelia-framework';\nimport {DataServices} from './data-services';\n\n @inject(DataServices)\nexport class Pics {\n  constructor(data) {\n    this.data = data;\n    this.PIC_SERVICE = 'pics';\n    this.picsArray = [];\n  }\n\n\n  updateArray(pic){\n    for(var i = 0, l = this.picsArray.length; i < l; i++ ){\n      if (this.picsArray[i]._id == pic._id){\n        this.picsArray[i] = pic;\n        break;\n      }\n    }\n    this.picsArray.push(this.picsArray.pop())\n  }\n\n\n  async save(pic){\n    if(!pic._id){\n      let response = await this.data.post(pic, this.PIC_SERVICE);\n\n      if(!response.error){\n        this.picsArray.push(response);\n      }\n      return response;\n     } else {\n      let response = await this.data.put(pic, this.PIC_SERVICE + \"/\" + pic._id);\n\n      if(!response.error){\n        this.updateArray(response);\n      }\n      return response;      \n    }         \n  }\n\n  async getUserPics(id){\n    let response = await this.data.get(this.PIC_SERVICE + \"/user/\" + id);\n    if(!response.error && !response.message){\n      this.picsArray = response;\n    }\n  }\n\n  async uploadFile(files, userId, picId){\n    let formData = new FormData();\n     files.forEach((item, index) => {\n      formData.append(\"file\" + index, item);\n    });\n    let response = await this.data.uploadFiles(formData, this.PIC_SERVICE +   \"/upload/\" + userId + \"/\" + picId);\n    if(!response.error){\n      this.updateArray(response);\n    }\n    return response;\n  }\n\n  async deleteImages(images,id){\n    let response = await this.data.post({'images':images},this.PIC_SERVICE + \"/\" + id+\"/images\");\n    this.updateArray(response);\n    return response;\n  }\n\n  async deletePic(id){\n    let response = await this.data.delete(this.PIC_SERVICE + \"/\" + id);\n      if(!response.error){\n        for(let i = 0; i < this.picsArray.length; i++){\n        if(this.picsArray[i]._id === id){\n          this.picsArray.splice(i,1);\n        }\n      }\n    }\n  }\n\n\n\n}\n","import {inject} from 'aurelia-framework';\nimport {DataServices} from './data-services';\n\n @inject(DataServices)\nexport class Users {\n  constructor(data) {\n    this.data = data;\n    this.USER_SERVICE = 'users';\n  } \n\n  async save(user){\n    if(user){\n      let serverResponse = await this.data.post(user, this.USER_SERVICE);\n      return serverResponse;\n    }\n  }\n\n}\n"],"sourceRoot":".."}